<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CampusNest | Student Accommodation</title>
  <link rel="stylesheet" href="..\css\style.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <!-- âœ… Firebase must load FIRST -->

  <script type="module" src="../js/core/firebase.js"></script>

  <!-- âœ… Auth depends on Firebase -->
  <script type="module" src="../js/core/auth.js"></script>

  <!-- âœ… Site logic LAST -->
  <script type="module" src="../js/core/script.js"></script>
</head>

<body>

<!-- ===== HEADER / NAVBAR ===== -->
<header class="header">
  <div class="container navbar">
    <div class="logo"> 
  <img src="../assets/images/logo.png.png" alt="CampusNest"/> 
  <span>CampusNest</span>
</div>

    <ul class="nav-links">
      <li><a href="listings.html">View Listings</a></li>
      <li><a href="landlords.html">Verified Landlords</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="contact.html">Contact</a></li>

      <li id="authContainer">
        <button id="authBtn" class="btn">Sign In</button>
      </li>

      <li class="dropdown" id="userDropdown" style="display:none;">
        <button id="userMenuBtn" class="user-btn">
          <span id="username">User</span>
        </button>

        <div class="dropdown-menu">
          <div class="dropdown-header">
            <strong id="userNameTop">ðŸ«†</strong>
          </div>
          <a href="profile.html">My Profile</a>
          <a href="enquiries.html">My Enquiries</a>
          <button id="logoutBtn">Logout</button>
        </div>
      </li>
    </ul>
  </div>
</header>

<!-- ===== HERO SECTION ===== -->
<section class="hero">
  <div class="slides">
    <div class="slide"><img src="../assets/images/IMG1.jpg" alt="slide1"></div>
    <div class="slide"><img src="../assets/images/IMG2.jpg" alt="slide2"></div>
    <div class="slide"><img src="../assets/images/IMG3.jpg" alt="slide3"></div>
  </div>

  <div class="hero-content container">
    <h1>Find Safe & Affordable Student Accommodation</h1>
    <p>Discover verified listings and trusted landlords close to your campus.</p>

    <form id="search-form" class="search-bar">
      <input id="search-location" type="text" placeholder="Search city, campus, or suburb" />
      <select id="min-price">
        <option value="">Min Price</option>
        <option value="1500">R1 500</option>
        <option value="2000">R2 000</option>
        <option value="2500">R2 500</option>
      </select>
      <select id="max-price">
        <option value="">Max Price</option>
        <option value="3000">R3 000</option>
        <option value="3500">R3 500</option>
        <option value="4000">R4 000</option>
        <option value="4500">R4 500</option>
      </select>
      <select id="bedrooms">
        <option value="">Bedrooms</option>
        <option value="1">1</option>
        <option value="2">2</option>
      </select>
      <button type="submit" class="btn search-btn">Search</button>
    </form>
  </div>
</section>

<!-- ===== FEATURES ===== -->
<section class="features container">
  <h2>Why Choose CampusNest?</h2>
  <div class="feature-grid">
    <div class="feature-card">
      <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="">
      <h3>Verified Landlords</h3>
      <p>All landlords are verified for your safety.</p>
    </div>
    <div class="feature-card">
      <img src="https://cdn-icons-png.flaticon.com/512/3580/3580378.png" alt="">
      <h3>Affordable Prices</h3>
      <p>Filter options for student budgets.</p>
    </div>
    <div class="feature-card">
      <img src="https://cdn-icons-png.flaticon.com/512/854/854878.png" alt="">
      <h3>Close to Campus</h3>
      <p>Find listings near your university.</p>
    </div>
  </div>
</section>

<!-- ===== STATS ===== -->
<section class="stats">
  <div class="container">
    <h2>CampusNest in Numbers</h2>
    <p>Empowering students nationwide.</p>

    <div class="stats-grid">
      <div class="stat-box"><h3 class="count" data-target="250">0</h3><p>Verified Landlords</p></div>
      <div class="stat-box"><h3 class="count" data-target="1200">0</h3><p>Active Listings</p></div>
      <div class="stat-box"><h3 class="count" data-target="3500">0</h3><p>Happy Students</p></div>
      <div class="stat-box"><h3 class="count" data-target="20">0</h3><p>Campuses Covered</p></div>
    </div>
  </div>
</section>

<!-- ===== STUDENT REVIEWS ===== -->
<section class="reviews-section">
  <div class="container">
    <h2>What Students Are Saying</h2>
    <p class="reviews-subtitle">Real stories from students who found their accommodation on CampusNest.</p>

    <div class="reviews-grid" id="reviewsGrid"></div>

    <div class="reviews-actions">
      <button class="btn" id="viewMoreReviewsBtn" type="button">View More</button>
      <button class="btn" id="viewLessReviewsBtn" type="button" style="display:none;">View Less</button>
      <button class="btn" id="addViewBtn" type="button" style="display:none;">Add View</button>
    </div>
  </div>
</section>

<!-- ===== ADD REVIEW POPUP ===== -->
<div class="review-modal" id="reviewModal" style="display:none;">
  <div class="review-modal-content">
    <button class="review-modal-close" id="closeReviewModal" type="button">&times;</button>
    <h3>Add Your Review</h3>
    <form id="reviewForm" class="review-form">
      <label for="reviewName">Your Name</label>
      <input type="text" id="reviewName" required>

      <label for="reviewUniversity">University</label>
      <input type="text" id="reviewUniversity" required>

      <label for="reviewText">Your Review</label>
      <textarea id="reviewText" required placeholder="Share your experience..."></textarea>

      <label for="reviewProfile">Profile Picture</label>
      <input type="file" id="reviewProfile" accept="image/*" required>

      <img id="reviewProfilePreview" class="review-profile-preview" alt="Profile preview" style="display:none;" />

      <button type="submit" class="btn">Submit Review</button>
      <p id="reviewFormStatus"></p>
    </form>
  </div>
</div>

<footer>
  <div class="container">
    <div class="footer-grid">
      <div class="footer-column">
        <h4>CampusNest</h4>
        <p>Trusted student accommodation bookings near South African campuses.</p>
      </div>

      <div class="footer-column">
        <h4>Quick Links</h4>
        <a href="index.html">Home</a>
        <a href="listings.html">View Listings</a>
        <a href="landlords.html">Verified Landlords</a>
        <a href="contact.html">Contact</a>
      </div>

      <div class="footer-column">
        <h4>Booking Support</h4>
        <a href="add-listing.html">List Your Property</a>
        <a href="enquiries.html">Track Enquiries</a>
        <a href="profile.html">Manage Profile</a>
        <a href="about.html">About CampusNest</a>
      </div>

      <div class="footer-column">
        <h4>Contact</h4>
        <a class="footer-contact-link" href="tel:+27827744933"><i class="fas fa-phone"></i> +27 82 774 4933</a>
        <a class="footer-contact-link" href="https://wa.me/27827744933" target="_blank" rel="noopener noreferrer"><i class="fab fa-whatsapp"></i> +27 82 774 4933</a>
        <a class="footer-contact-link" href="mailto:s.kumalo0115@gmail.com"><i class="fas fa-envelope"></i> s.kumalo0115@gmail.com</a>
        <a class="footer-contact-link" href="https://www.linkedin.com/in/sbahle-kumalo-b4b498267" target="_blank" rel="noopener noreferrer"><i class="fab fa-linkedin"></i> in/sbahle-kumalo-b4b498267</a>
        <a class="footer-contact-link" href="https://github.com/skumalo0115-commits" target="_blank" rel="noopener noreferrer"><i class="fab fa-github"></i> GitHub Profile</a>
      </div>
    </div>

    <div class="footer-bottom">
      <p>&copy; 2025 CampusNest | All Rights Reserved</p>
    </div>
  </div>
</footer>

<!-- ===== AUTH MODAL ===== -->
<div class="auth-modal" id="authModal" style="display:none;">
  <div class="auth-box">
    <button class="auth-close" id="authClose">&times;</button>

    <div class="auth-tabs">
      <button id="signInTab" class="active">Sign In</button>
      <button id="signUpTab">Sign Up</button>
    </div>

    <form id="signInForm" class="auth-form">
      <input type="email" id="signInEmail" placeholder="Email" required autocomplete="username">
      <input type="password" id="signInPassword" placeholder="Password" required autocomplete="current-password">
      <button type="submit" class="btn">Sign In</button>

      <button type="button" id="googleSignInBtn" class="google-btn">Sign In with Google</button>
      <button type="button" id="adminSignInBtn" class="btn-outline">Admin Sign In</button>

      <p id="signInMessage" class="status-message error-message"></p>
    </form>

    <form id="signUpForm" class="auth-form" style="display:none;">
      <input type="text" id="signUpName" placeholder="Full Name" required>
      <input type="email" id="signUpEmail" placeholder="Email" required autocomplete="username">
      <input type="password" id="signUpPassword" placeholder="Password" required autocomplete="new-password">
      <button type="submit" class="btn">Sign Up</button>
      <button type="button" id="googleSignUpBtn" class="google-btn">Sign Up with Google</button>
      <p id="signUpMessage" class="status-message"></p>
    </form>
  </div>
</div>

<!-- ===== SEARCH REDIRECT LOGIC (SAFE ADD) ===== -->
<script type="module">
document.addEventListener("DOMContentLoaded", () => {
  const form = document.getElementById("search-form");
  if (!form) return;

  form.addEventListener("submit", e => {
    e.preventDefault();

    const location = document.getElementById("search-location")?.value.trim() || "";
    const min = document.getElementById("min-price")?.value || "";
    const max = document.getElementById("max-price")?.value || "";
    const beds = document.getElementById("bedrooms")?.value || "";

    const params = new URLSearchParams();
    if (location) params.set("search", location);
    if (min) params.set("min", min);
    if (max) params.set("max", max);
    if (beds) params.set("beds", beds);

    window.location.href = "listings.html?" + params.toString();
  });
});


  const toggleBtn = document.querySelector('.nav-toggle');
  const navWrapper = document.querySelector('.nav-links-wrapper');

  if (toggleBtn && navWrapper) {
    toggleBtn.addEventListener('click', () => {
      navWrapper.classList.toggle('show');
    });
  }


</script>
</body>
</html>
